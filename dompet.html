<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pohon Jariyah | Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        :root { --dana-blue: #108ee9; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        body { background: #f0f2f5; overflow: hidden; height: 100vh; }

        /* --- STAGE POHON (Visual Mewah) --- */
        .stage {
            height: 60vh;
            background: linear-gradient(to bottom, #4facfe, #00f2fe);
            position: relative;
            display: flex; justify-content: center; align-items: flex-end;
            overflow: hidden;
        }

        .hill {
            position: absolute; bottom: -100px; width: 140%; height: 200px;
            background: #2ecc71; border-radius: 50%; z-index: 2;
        }

        .tree-container {
            position: relative; z-index: 10; margin-bottom: 30px;
            animation: sway 5s ease-in-out infinite; transform-origin: bottom center;
        }

        .tree-img { width: 260px; filter: drop-shadow(0 15px 20px rgba(0,0,0,0.2)); }

        @keyframes sway {
            0%, 100% { transform: rotate(-1deg); }
            50% { transform: rotate(1deg); }
        }

        /* --- PANEL UI --- */
        .ui-panel {
            height: 40vh; background: white; border-radius: 30px 30px 0 0;
            margin-top: -30px; position: relative; z-index: 20;
            padding: 30px 25px; text-align: center;
            box-shadow: 0 -10px 30px rgba(0,0,0,0.05);
        }

        .badge {
            background: #e8f5e9; color: #2e7d32; padding: 5px 15px;
            border-radius: 50px; font-size: 12px; font-weight: 700;
            margin-bottom: 10px; display: inline-block;
        }

        .progress-card {
            background: #f8f9fa; padding: 20px; border-radius: 20px;
            margin: 15px 0 25px; border: 1px solid #eee;
        }

        .bar-bg { width: 100%; height: 12px; background: #eee; border-radius: 10px; margin: 10px 0; overflow: hidden; }
        .bar-fill { height: 100%; background: #4caf50; width: 0%; transition: 1.5s; }

        .btn-siram {
            width: 100%; padding: 18px; background: #ff4d00; color: white;
            border: none; border-radius: 50px; font-size: 16px; font-weight: 800;
            cursor: pointer; box-shadow: 0 8px 15px rgba(255, 77, 0, 0.3);
        }

        /* --- NAVIGASI TERKUNCI --- */
        .bottom-nav {
            position: fixed; bottom: 0; width: 100%; height: 75px;
            background: white; border-top: 1px solid #f0f0f0;
            display: flex; justify-content: space-around; align-items: center; z-index: 100;
        }
        .nav-item { text-align: center; color: #bbb; font-size: 10px; flex: 1; cursor: pointer; }
        .nav-item.active { color: var(--dana-blue); }
        .nav-item i { font-size: 22px; display: block; margin-bottom: 4px; }
    </style>
</head>
<body>

    <div class="stage">
        <div class="tree-container">
            <img src="https://www.pngarts.com/files/3/Green-Tree-PNG-Image-Background.png" class="tree-img">
        </div>
        <div class="hill"></div>
    </div>

    <div class="ui-panel">
        <div class="badge">Pohon Kebaikan</div>
        <h2 style="color: #333; font-weight: 800;">Dompet Jariyah</h2>

        <div class="progress-card">
            <div style="display: flex; justify-content: space-between; font-size: 12px; font-weight: 700;">
                <span>Progres Tumbuh</span>
                <span id="pct">0%</span>
            </div>
            <div class="bar-bg">
                <div class="bar-fill" id="bar"></div>
            </div>
            <p style="font-size: 11px; color: #888;">Total Pahala: Rp <span id="total-val">0</span></p>
        </div>

        <button class="btn-siram" onclick="location.href='kartu.html'">SIRAM SEDEKAH</button>
    </div>

    <div class="bottom-nav">
        <div class="nav-item" onclick="location.href='dompet.html'"><i class="fas fa-home"></i>Beranda</div>
        <div class="nav-item" onclick="location.href='dompet.html'"><i class="fas fa-history"></i>Aktivitas</div>
        <div class="nav-item active" onclick="location.href='dompet.html'"><i class="fas fa-wallet"></i>Dompet</div>
        <div class="nav-item" onclick="location.href='dompet.html'"><i class="fas fa-user-circle"></i>Saya</div>
    </div>

    <script>
        function loadData() {
            let data = localStorage.getItem('kas_data');
            let list = data ? JSON.parse(data) : [];
            let total = 0;
            list.forEach(item => { if(item.type === 'masuk') total += parseInt(item.amount); });

            document.getElementById('total-val').innerText = total.toLocaleString();
            let p = Math.min((total / 1000000) * 100, 100);
            setTimeout(() => {
                document.getElementById('bar').style.width = p + "%";
                document.getElementById('pct').innerText = Math.floor(p) + "%";
            }, 300);
        }
        window.onload = loadData;
    </script>
</body>
</html>
